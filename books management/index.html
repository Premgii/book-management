<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prem's Library</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg: #0f2027;
    --bg2: #203a43;
    --bg3: #2c5364;
    --card: #1e293b;
    --accent: #38bdf8;
    --danger: #fb7185;
    --success: #4ade80;
    --text: #e5e7eb;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background: linear-gradient(135deg, var(--bg), var(--bg2), var(--bg3));
    color: var(--text);
    min-height: 100vh;
    padding: 30px;
}

h1 {
    text-align: center;
    margin-bottom: 25px;
    letter-spacing: 2px;
}

.panel {
    max-width: 1100px;
    margin: auto;
}

.toolbar {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: space-between;
    margin-bottom: 25px;
}

.toolbar input,
.toolbar select {
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    outline: none;
}

.toolbar button {
    padding: 10px 20px;
    background: var(--accent);
    color: #000;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
}

.library {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

.book {
    background: var(--card);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0,0,0,.4);
    transition: transform .3s;
}

.book:hover {
    transform: scale(1.05);
}

.book h3 {
    margin-bottom: 8px;
}

.badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    margin-top: 6px;
}

.available {
    background: var(--success);
    color: #000;
}

.unavailable {
    background: var(--danger);
    color: #000;
}

.actions {
    margin-top: 15px;
    display: flex;
    gap: 10px;
}

.actions button {
    flex: 1;
    border: none;
    border-radius: 8px;
    padding: 8px;
    cursor: pointer;
}

.borrow {
    background: #facc15;
}

.remove {
    background: var(--danger);
}
</style>
</head>

<body>

<h1>üìö Prem's Library</h1>

<div class="panel">

    <div class="toolbar">
        <button onclick="openForm()">‚ûï Add Book</button>
        <input type="text" placeholder="Search books..." oninput="searchBooks(this.value)">
        <select onchange="sortBooks(this.value)">
            <option value="">Sort by</option>
            <option value="title">Title</option>
            <option value="year">Year</option>
        </select>
    </div>

    <div id="library" class="library"></div>
</div>

<script>
let books = JSON.parse(localStorage.getItem("premsLibrary")) || [
    {id:"P01",title:"1984",author:"George Orwell",year:1949,copies:3},
    {id:"P02",title:"The Hobbit",author:"J.R.R. Tolkien",year:1937,copies:2},
    {id:"P03",title:"Clean Code",author:"Robert C. Martin",year:2008,copies:5},
    {id:"P04",title:"Atomic Habits",author:"James Clear",year:2018,copies:4},
    {id:"P05",title:"The Alchemist",author:"Paulo Coelho",year:1988,copies:0},
    {id:"P06",title:"Rich Dad Poor Dad",author:"Robert Kiyosaki",year:1997,copies:6},
    {id:"P07",title:"A Brief History of Time",author:"Stephen Hawking",year:1988,copies:1},
    {id:"P08",title:"Harry Potter",author:"J.K. Rowling",year:1997,copies:7}
];

let display = [...books];

function save() {
    localStorage.setItem("premsLibrary", JSON.stringify(books));
}

function render() {
    const lib = document.getElementById("library");
    lib.innerHTML = "";

    display.forEach(b => {
        lib.innerHTML += `
        <div class="book">
            <h3>${b.title}</h3>
            <p>‚úçÔ∏è ${b.author}</p>
            <p>üìÖ ${b.year}</p>
            <span class="badge ${b.copies>0?"available":"unavailable"}">
                ${b.copies>0?`${b.copies} Available`:"Out of stock"}
            </span>

            <div class="actions">
                <button class="borrow" onclick="borrow('${b.id}')">Borrow</button>
                ${b.copies===0?`<button class="remove" onclick="removeBook('${b.id}')">Delete</button>`:""}
            </div>
        </div>`;
    });
}

function borrow(id) {
    const b = books.find(x=>x.id===id);
    if(b.copies>0) b.copies--;
    save();
    render();
}

function removeBook(id) {
    books = books.filter(b=>b.id!==id);
    display=[...books];
    save();
    render();
}

function searchBooks(txt) {
    txt = txt.toLowerCase();
    display = books.filter(b => 
        b.title.toLowerCase().includes(txt) ||
        b.author.toLowerCase().includes(txt)
    );
    render();
}

function sortBooks(type) {
    if(type==="title") display.sort((a,b)=>a.title.localeCompare(b.title));
    if(type==="year") display.sort((a,b)=>a.year-b.year);
    render();
}

render();
</script>

</body>
</html>
